<script>
  function speichereBenutzer() {
    const k = document.getElementById("kuerzel").value.trim().toUpperCase();
    const n = document.getElementById("name").value.trim();
    if (!k || !n) return;

    const liste = JSON.parse(localStorage.getItem("kuerzelNamen") || "{}");
    liste[k] = n;
    localStorage.setItem("kuerzelNamen", JSON.stringify(liste));
    zeigeBenutzerListe();
  }

  function zeigeBenutzerListe() {
    const liste = JSON.parse(localStorage.getItem("kuerzelNamen") || "{}");
    const hauptKuerzel = localStorage.getItem("hauptKuerzel") || "";
    const container = document.getElementById("benutzerListe");
    container.innerHTML = "<h3>ðŸ‘¥ Gespeicherte Benutzer</h3>";

    Object.entries(liste).forEach(([k, n]) => {
      const wrapper = document.createElement("div");
      wrapper.style.marginBottom = "0.5rem";

      const input = document.createElement("input");
      input.value = n;
      input.onchange = () => {
        liste[k] = input.value;
        localStorage.setItem("kuerzelNamen", JSON.stringify(liste));
        zeigeBenutzerListe();
      };

      const hauptBtn = document.createElement("button");
      hauptBtn.textContent = k === hauptKuerzel ? "âœ… Hauptnutzer" : "â­ Setzen";
      hauptBtn.onclick = () => {
        localStorage.setItem("hauptKuerzel", k);
        zeigeBenutzerListe();
      };

      const loeschBtn = document.createElement("button");
      loeschBtn.textContent = "ðŸ—‘ LÃ¶schen";
      loeschBtn.onclick = () => {
        delete liste[k];
        localStorage.setItem("kuerzelNamen", JSON.stringify(liste));
        if (k === hauptKuerzel) localStorage.removeItem("hauptKuerzel");
        zeigeBenutzerListe();
      };

      wrapper.append(`${k}: `, input, hauptBtn, loeschBtn);
      container.appendChild(wrapper);
    });
  }

  zeigeBenutzerListe();
</script>